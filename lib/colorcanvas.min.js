(function(){this.ColorCanvas=function(t){return new ColorCanvas.Picker(t)}}).call(this),function(){var t,e,r,o,n,i=[].slice,s=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){return function(){return t.apply(e,arguments)}},l={}.hasOwnProperty,h=function(t,e){function r(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};e={bind:function(t,e){var r,o,n,i,s;for(o=t.split(" "),r=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={}),i=0,s=o.length;s>i;i++)n=o[i],r[n]||(r[n]=[]),r[n].push(e);return this},one:function(t,e){return this.bind(t,function(){return this.unbind(t,arguments.callee),e.apply(this,arguments)})},trigger:function(){var t,e,r,o,n,s,a;if(t=arguments.length>=1?i.call(arguments,0):[],r=t.shift(),o=this.hasOwnProperty("_callbacks")&&(null!=(a=this._callbacks)?a[r]:void 0)){for(n=0,s=o.length;s>n&&(e=o[n],e.apply(this,t)!==!1);n++);return!0}},unbind:function(t,e){var r,o,n,i,s,a;if(!t)return this._callbacks={},this;if(n=null!=(a=this._callbacks)?a[t]:void 0,!n)return this;if(!e)return delete this._callbacks[t],this;for(o=i=0,s=n.length;s>i;o=++i)if(r=n[o],r===e){n=n.slice(),n.splice(o,1),this._callbacks[t]=n;break}return this}},n=["included","extended"],r=function(){function t(){"function"==typeof this.init&&this.init.apply(this,arguments)}return t.include=function(t){var e,r,o;if(!t)throw"include(obj) requires obj";for(e in t)r=t[e],0>s.call(n,e)&&(this.prototype[e]=r);return null!=(o=t.included)&&o.apply(this),this},t.extend=function(t){var e,r,o;if(!t)throw"extend(obj) requires obj";for(e in t)r=t[e],0>s.call(n,e)&&(this[e]=r);return null!=(o=t.extended)&&o.apply(this),this},t.proxy=function(t){var e=this;return function(){return t.apply(e,arguments)}},t.prototype.proxy=function(t){var e=this;return function(){return t.apply(e,arguments)}},t}(),t=function(t){function r(t){this.release=a(this.release,this);var e,o,n;this.options=t,n=this.options;for(e in n)o=n[e],this[e]=o;this.el||(this.el=document.createElement(this.tag)),this.el=$(this.el),this.className&&this.el.addClass(this.className),this.attributes&&this.el.attr(this.attributes),this.events||(this.events=this.constructor.events),this.elements||(this.elements=this.constructor.elements),this.events&&this.delegateEvents(this.events),this.elements&&this.refreshElements(),r.__super__.constructor.apply(this,arguments)}return h(r,t),r.prototype.eventSplitter=/^(\S+)\s*(.*)$/,r.prototype.tag="div",r.include(e),r.prototype.release=function(){return this.el.remove(),this.unbind()},r.prototype.$=function(t){return $(t,this.el)},r.prototype.delegateEvents=function(t){var e,r,o,n,i,s,a=this;s=[];for(r in t)n=t[r],"function"!=typeof n&&(n=function(t){return function(){return a[t].apply(a,arguments),!0}}(n)),o=r.match(this.eventSplitter),e=o[1],i=o[2],""===i?s.push(this.el.bind(e,n)):s.push(this.el.delegate(i,e,n));return s},r.prototype.refreshElements=function(){var t,e,r,o;r=this.elements,o=[];for(t in r)e=r[t],o.push(this[e]=this.$(t));return o},r.prototype.html=function(t){return this.el.html(t.el||t),this.refreshElements(),this.el},r.prototype.append=function(){var t,e,r;return e=arguments.length>=1?i.call(arguments,0):[],e=function(){var r,o,n;for(n=[],r=0,o=e.length;o>r;r++)t=e[r],n.push(t.el||t);return n}(),(r=this.el).append.apply(r,e),this.refreshElements(),this.el},r}(r),o=ColorCanvas.Spine={},o.Controller=t}.call(this),function(t){function e(t){if("object"==typeof t&&t.hasOwnProperty("_tc_id"))return t;var e=r(t),o=e.r,i=e.g,a=e.b,h=S(e.a),c=w(100*h)/100,u=e.format;return 1>o&&(o=w(o)),1>i&&(i=w(i)),1>a&&(a=w(a)),{ok:e.ok,format:u,_tc_id:m++,alpha:h,toHsv:function(){var t=s(o,i,a);return{h:360*t.h,s:t.s,v:t.v,a:h}},toHsvString:function(){var t=s(o,i,a),e=w(360*t.h),r=w(100*t.s),n=w(100*t.v);return 1==h?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+c+")"},toHsl:function(){var t=n(o,i,a);return{h:360*t.h,s:t.s,l:t.l,a:h}},toHslString:function(){var t=n(o,i,a),e=w(360*t.h),r=w(100*t.s),s=w(100*t.l);return 1==h?"hsl("+e+", "+r+"%, "+s+"%)":"hsla("+e+", "+r+"%, "+s+"%, "+c+")"},toHex:function(){return l(o,i,a)},toHexString:function(){return"#"+l(o,i,a)},toRgb:function(){return{r:w(o),g:w(i),b:w(a),a:h}},toRgbString:function(){return 1==h?"rgb("+w(o)+", "+w(i)+", "+w(a)+")":"rgba("+w(o)+", "+w(i)+", "+w(a)+", "+c+")"},toName:function(){return $[l(o,i,a)]||!1},toFilter:function(){var t=l(o,i,a),e=Math.round(255*S(h)).toString(16);return"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+e+t+",endColorstr=#"+e+t+")"},toString:function(t){t=t||this.format;var e=!1;return"rgb"===t&&(e=this.toRgbString()),"hex"===t&&(e=this.toHexString()),"name"===t&&(e=this.toName()),"hsl"===t&&(e=this.toHslString()),"hsv"===t&&(e=this.toHsvString()),e||this.toHexString()}}}function r(t){var e={r:255,g:255,b:255},r=1,n=!1,s=!1;if("string"==typeof t&&(t=v(t)),"object"==typeof t){if(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b"))e=o(t.r,t.g,t.b),n=!0,s="rgb";else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v"))t.s=g(t.s),t.v=g(t.v),e=a(t.h,t.s,t.v),n=!0,s="hsv";else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")){t.s=g(t.s),t.l=g(t.l);var e=i(t.h,t.s,t.l);n=!0,s="hsl"}t.hasOwnProperty("a")&&(r=t.a)}return{ok:n,format:t.format||s,r:_(255,x(e.r,0)),g:_(255,x(e.g,0)),b:_(255,x(e.b,0)),a:r}}function o(t,e,r){return{r:255*c(t,255),g:255*c(e,255),b:255*c(r,255)}}function n(t,e,r){t=c(t,255),e=c(e,255),r=c(r,255);var o,n,i=x(t,e,r),s=_(t,e,r),a=(i+s)/2;if(i==s)o=n=0;else{var l=i-s;switch(n=a>.5?l/(2-i-s):l/(i+s),i){case t:o=(e-r)/l+(r>e?6:0);break;case e:o=(r-t)/l+2;break;case r:o=(t-e)/l+4}o/=6}return{h:o,s:n,l:a}}function i(t,e,r){function o(t,e,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?t+6*(e-t)*r:.5>r?e:2/3>r?t+6*(e-t)*(2/3-r):t}var n,i,s;if(t=c(t,360),e=c(e,100),r=c(r,100),0==e)n=i=s=r;else{var a=.5>r?r*(1+e):r+e-r*e,l=2*r-a;n=o(l,a,t+1/3),i=o(l,a,t),s=o(l,a,t-1/3)}return{r:255*n,g:255*i,b:255*s}}function s(t,e,r){t=c(t,255),e=c(e,255),r=c(r,255);var o,n,i=x(t,e,r),s=_(t,e,r),a=i,l=i-s;if(n=0==i?0:l/i,i==s)o=0;else{switch(i){case t:o=(e-r)/l+(r>e?6:0);break;case e:o=(r-t)/l+2;break;case r:o=(t-e)/l+4}o/=6}return{h:o,s:n,v:a}}function a(t,e,r){var o,n,i;t=6*c(t,360),e=c(e,100),r=c(r,100);var s=C.floor(t),a=t-s,l=r*(1-e),h=r*(1-a*e),u=r*(1-(1-a)*e),p=s%6,o=[r,h,l,l,u,r][p],n=[u,r,r,h,l,l][p],i=[l,l,u,r,r,h][p];return{r:255*o,g:255*n,b:255*i}}function l(t,e,r){function o(t){return 1==t.length?"0"+t:""+t}var n=[o(w(t).toString(16)),o(w(e).toString(16)),o(w(r).toString(16))];return n[0][0]==n[0][1]&&n[1][0]==n[1][1]&&n[2][0]==n[2][1]?n[0][0]+n[1][0]+n[2][0]:n.join("")}function h(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function c(t,e){f(t)&&(t="100%");var r=d(t);return t=_(e,x(0,S(t))),r&&(t=parseInt(t*e)/100),1e-6>C.abs(t-e)?1:t%e/S(e)}function u(t){return _(1,x(0,t))}function p(t){return parseInt(t,16)}function f(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===S(t)}function d(t){return"string"==typeof t&&-1!=t.indexOf("%")}function g(t){return 1>=t&&(t=100*t+"%"),t}function v(t){t=t.replace(y,"").replace(b,"").toLowerCase();var e=!1;if(H[t])t=H[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0};var r;return(r=P.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=P.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=P.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=P.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=P.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=P.hex6.exec(t))?{r:p(r[1]),g:p(r[2]),b:p(r[3]),format:e?"name":"hex"}:(r=P.hex3.exec(t))?{r:p(r[1]+""+r[1]),g:p(r[2]+""+r[2]),b:p(r[3]+""+r[3]),format:e?"name":"hex"}:!1}var y=/^[\s,#]+/,b=/\s+$/,m=0,C=Math,w=C.round,_=C.min,x=C.max,k=C.random,S=t.parseFloat;e.fromRatio=function(t){if("object"==typeof t){var r={};for(var o in t)r[o]=g(t[o]);t=r}return e(t)},e.equals=function(t,r){return t&&r?e(t).toHex()==e(r).toHex():!1},e.random=function(){return e.fromRatio({r:k(),g:k(),b:k()})},e.desaturate=function(t,r){var o=e(t).toHsl();return o.s-=(r||10)/100,o.s=u(o.s),e(o)},e.saturate=function(t,r){var o=e(t).toHsl();return o.s+=(r||10)/100,o.s=u(o.s),e(o)},e.greyscale=function(t){return e.desaturate(t,100)},e.lighten=function(t,r){var o=e(t).toHsl();return o.l+=(r||10)/100,o.l=u(o.l),e(o)},e.darken=function(t,r){var o=e(t).toHsl();return o.l-=(r||10)/100,o.l=u(o.l),e(o)},e.complement=function(t){var r=e(t).toHsl();return r.h=(r.h+180)%360,e(r)},e.triad=function(t){var r=e(t).toHsl(),o=r.h;return[e(t),e({h:(o+120)%360,s:r.s,l:r.l}),e({h:(o+240)%360,s:r.s,l:r.l})]},e.tetrad=function(t){var r=e(t).toHsl(),o=r.h;return[e(t),e({h:(o+90)%360,s:r.s,l:r.l}),e({h:(o+180)%360,s:r.s,l:r.l}),e({h:(o+270)%360,s:r.s,l:r.l})]},e.splitcomplement=function(t){var r=e(t).toHsl(),o=r.h;return[e(t),e({h:(o+72)%360,s:r.s,l:r.l}),e({h:(o+216)%360,s:r.s,l:r.l})]},e.analogous=function(t,r,o){r=r||6,o=o||30;var n=e(t).toHsl(),i=360/o,s=[e(t)];for(n.h=(n.h-(i*r>>1)+720)%360;--r;)n.h=(n.h+i)%360,s.push(e(n));return s},e.monochromatic=function(t,r){r=r||6;for(var o=e(t).toHsv(),n=o.h,i=o.s,s=o.v,a=[],l=1/r;r--;)a.push(e({h:n,s:i,v:s})),s=(s+l)%1;return a},e.readable=function(t,r){var o=e(t).toRgb(),n=e(r).toRgb();return(n.r-o.r)*(n.r-o.r)+(n.g-o.g)*(n.g-o.g)+(n.b-o.b)*(n.b-o.b)>10404};var H=e.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},$=e.hexNames=h(H),P=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+t+")",o="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{rgb:new RegExp("rgb"+o),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+o),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+o),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();t.tinycolor=e}(this),function(){ColorCanvas.Color=function(){function t(t){this.set(tinycolor(t).toRgb())}return t.White=function(e){return new t({r:255,g:255,b:255,a:e})},t.Black=function(e){return new t({r:0,g:0,b:0,a:e})},t.Transparent=function(){return new t},t.prototype.tinycolor=function(){return tinycolor({r:this.r,g:this.g,b:this.b,a:this.a})},t.prototype.toHex=function(){return"#"+this.tinycolor().toHex().toUpperCase()},t.prototype.toHSV=function(){return this.tinycolor().toHsv()},t.prototype.toHSL=function(){return this.tinycolor().toHsl()},t.prototype.toRGB=function(){var t;return t={r:this.r,g:this.g,b:this.b}},t.prototype.toRGBA=function(){var t;return t={r:this.r,g:this.g,b:this.b,a:this.a}},t.prototype.toPure=function(){var e,r;return e=this.tinycolor().toHsl().h,r=tinycolor({h:e,s:100,l:50}).toRgb(),new t({r:r.r,g:r.g,b:r.b})},t.prototype.isTransparent=function(){return!this.a},t.prototype.set=function(t){return null!=t.r&&(this.r=parseInt(t.r,10)),null!=t.g&&(this.g=parseInt(t.g,10)),null!=t.b&&(this.b=parseInt(t.b,10)),null!=t.a&&(this.a=parseFloat(t.a)),isNaN(this.a)&&(this.a=1),this},t.prototype.clone=function(){return new t(this.toRGBA())},t.prototype.toString=function(){return null!=this.a&&1!==this.a?"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")":this.toHex()},t}()}.call(this),function(){var t,e,r=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};t=ColorCanvas.Color,e=ColorCanvas.Spine,ColorCanvas.Canvas=function(e){function o(){this.drop=r(this.drop,this),this.over=r(this.over,this),o.__super__.constructor.apply(this,arguments),this.canvas=$("<canvas />"),this.canvas.attr({width:this.width,height:this.height}),this.canvas.css({width:this.width,height:this.height}),this.ctx=this.canvas[0].getContext("2d"),this.append(this.canvas)}return n(o,e),o.prototype.width=100,o.prototype.height=100,o.prototype.events={"mousedown canvas":"drag"},o.prototype.val=function(e,r){var o;return o=this.ctx.getImageData(e,r,1,1).data,new t({r:o[0],g:o[1],b:o[2]})},o.prototype.drag=function(t){return this.canvas.mousemove(this.over),$(document).mouseup(this.drop),this.over(t)},o.prototype.over=function(t){var e,r,o;return t.preventDefault(),e=this.canvas.offset(),r=t.pageX-e.left,o=t.pageY-e.top,this.change(this.val(r,o))},o.prototype.change=function(t){return this.color=t,this.trigger("change",this.color)},o.prototype.drop=function(){return this.canvas.unbind("mousemove",this.over),$(document).unbind("mouseup",this.drop)},o.prototype.release=function(){return this.drop(),o.__super__.release.apply(this,arguments)},o}(e.Controller)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function o(){this.constructor=e}for(var n in r)t.call(r,n)&&(e[n]=r[n]);return o.prototype=r.prototype,e.prototype=new o,e.__super__=r.prototype,e};ColorCanvas.Alpha=function(t){function r(){r.__super__.constructor.apply(this,arguments),this.position=new ColorCanvas.Position,this.append(this.position),this.color||(this.color=new ColorCanvas.Color.Black),this.setColor(this.color)}return e(r,t),r.prototype.className="alpha",r.prototype.width=25,r.prototype.height=215,r.prototype.render=function(){var t;return this.ctx.clearRect(0,0,this.width,this.height),t=this.ctx.createLinearGradient(0,0,0,this.height),t.addColorStop(0,this.color.clone().set({a:0}).toString()),t.addColorStop(1,this.color.clone().set({a:1}).toString()),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height),this.position.move(this.getCoords())},r.prototype.setColor=function(t){return this.color=t,this.render()},r.prototype.val=function(t,e){var r;return r=this.ctx.getImageData(t,e,1,1).data,this.color.clone().set({a:Math.round(100*(r[3]/255))/100})},r.prototype.getCoords=function(t){var e;return null==t&&(t=this.color),e={left:0,top:Math.round(t.a*this.height)}},r.prototype.change=function(t){return this.color=t,this.position.move(this.getCoords()),r.__super__.change.apply(this,arguments)},r}(ColorCanvas.Canvas)}.call(this),function(){this.ColorCanvas||(this.ColorCanvas={}),this.ColorCanvas["picker/views/display"]=function(t){t||(t={});var e,r=[],o=t.safe,n=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},n||(n=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){r.push('<div class="controls">\n  <form>\n    <label>\n      <span>R</span>\n      <input type="number" min="0" max="255" name="r" required autofocus>\n    </label>\n\n    <label>\n      <span>G</span>\n      <input type="number" min="0" max="255" name="g" required>\n    </label>\n\n    <label>\n      <span>B</span>\n      <input type="number" min="0" max="255" name="b" required>\n    </label>\n\n    <label>\n      <span>A</span>\n      <input type="number" min="0" max="100" step="1" name="a">%\n    </label>\n\n    <label>\n      <span>Hex</span>\n      <input type="text" name="hex">\n    </label>\n\n    <div class="preview">\n      <div class="inner">\n        &nbsp;\n      </div>\n      <div class="original">\n        &nbsp;\n      </div>\n    </div>\n\n    <footer>\n      <button data-type="cancel">Cancel</button>\n      <button data-type="save" class="right">Save</button>\n    </footer>\n  </form>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=n,r.join("")}}.call(this),function(){var t,e,r,o={}.hasOwnProperty,n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};t=ColorCanvas.Color,e=ColorCanvas.Spine,r=ColorCanvas["picker/views/display"],ColorCanvas.Display=function(e){function o(){o.__super__.constructor.apply(this,arguments),this.color||(this.color=new t),this.render(),this.setColor(this.color)}return n(o,e),o.prototype.tag="article",o.prototype.elements={"input[name=hex]":"$hex","input[name=r]":"$r","input[name=g]":"$g","input[name=b]":"$b","input[name=a]":"$a",".preview .inner":"$preview",".preview .original":"$original"},o.prototype.events={"change input:not([name=hex])":"changeInput","keyup input[name=hex]":"changeHex","submit form":"changeInput"},o.prototype.render=function(){return this.html(r(this)),this.original?this.$original.css({background:this.original.toString()}):void 0},o.prototype.setColor=function(t){return this.color=t,this.$r.val(this.color.r),this.$g.val(this.color.g),this.$b.val(this.color.b),this.$a.val(Math.round(100*this.color.a)),this.$hex.val(this.color.toHex()),this.$preview.css({background:this.color.toString()})},o.prototype.changeInput=function(e){return e.preventDefault(),this.color=new t({r:this.$r.val(),g:this.$g.val(),b:this.$b.val(),a:parseFloat(this.$a.val())/100}),this.trigger("change",this.color)},o.prototype.changeHex=function(e){return e.preventDefault(),this.color=new t(this.$hex.val()),this.$r.val(this.color.r),this.$g.val(this.color.g),this.$b.val(this.color.b),this.$preview.css({background:this.color.toString()}),this.trigger("change",this.color)},o}(e.Controller)}.call(this),function(){var t,e={}.hasOwnProperty,r=function(t,r){function o(){this.constructor=t}for(var n in r)e.call(r,n)&&(t[n]=r[n]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t},o=[].slice;t=ColorCanvas.Color,ColorCanvas.Gradient=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.position=new ColorCanvas.Position,this.append(this.position),this.color||(this.color=new t.Black),this.setColor(this.color)}return r(n,e),n.prototype.className="gradient",n.prototype.width=250,n.prototype.height=215,n.prototype.setColor=function(t){return this.color=t,this.render()},n.prototype.renderGradient=function(){var t,e,r,n,i,s,a,l,h;for(i=arguments[0],e=arguments.length>=2?o.call(arguments,1):[],r=(l=this.ctx).createLinearGradient.apply(l,[0,0].concat(o.call(i))),r.addColorStop(0,null!=(h=e.shift())?h.toString():void 0),n=s=0,a=e.length;a>s;n=++s)t=e[n],r.addColorStop(n+1/e.length,t.toString());return this.ctx.fillStyle=r,this.ctx.fillRect(0,0,this.width,this.height)},n.prototype.render=function(){var e,r;return this.ctx.clearRect(0,0,this.width,this.height),this.renderGradient([this.width,0],new t.White,new t.White),r=this.color.toPure(),this.renderGradient([this.width,0],r.clone().set({a:0}),r.clone().set({a:1})),e=this.ctx.createLinearGradient(0,0,-6,this.height),e.addColorStop(0,new t.Black(0).toString()),e.addColorStop(1,new t.Black(1).toString()),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.width,this.height),this.position.move(this.getCoords())},n.prototype.getCoords=function(t){var e,r;return null==t&&(t=this.color),e=t.toHSV(),r={left:Math.round(this.width*e.s),top:Math.round(this.height*(1-e.v))}},n.prototype.change=function(t){return this.color=t,this.position.move(this.getCoords()),n.__super__.change.apply(this,arguments)},n}(ColorCanvas.Canvas)}.call(this),function(){var t,e={}.hasOwnProperty,r=function(t,r){function o(){this.constructor=t}for(var n in r)e.call(r,n)&&(t[n]=r[n]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t};t=ColorCanvas.Spine,ColorCanvas.Position=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.el.css({position:"absolute"})}return r(e,t),e.prototype.className="position",e.prototype.move=function(t){return this.el.css(t)},e}(t.Controller)}.call(this),function(){var t,e,r={}.hasOwnProperty,o=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};e=ColorCanvas.Color,t=ColorCanvas.Canvas,ColorCanvas.Spectrum=function(t){function r(){r.__super__.constructor.apply(this,arguments),this.position=new ColorCanvas.Position,this.append(this.position),this.color||(this.color=new e),this.setColor(this.color)}return o(r,t),r.prototype.className="spectrum",r.prototype.width=25,r.prototype.height=215,r.prototype.render=function(){var t;return this.ctx.clearRect(0,0,this.width,this.height),t=this.ctx.createLinearGradient(0,0,0,this.height),t.addColorStop(0,"rgb(255,   0,   0)"),t.addColorStop(.16,"rgb(255,   0, 255)"),t.addColorStop(.33,"rgb(0,     0, 255)"),t.addColorStop(.5,"rgb(0,   255, 255)"),t.addColorStop(.67,"rgb(0,   255,   0)"),t.addColorStop(.83,"rgb(255, 255,   0)"),t.addColorStop(1,"rgb(255,   0,   0)"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height),this.position.move(this.getCoords())},r.prototype.setColor=function(t){return this.color=t,this.render()},r.prototype.getCoords=function(t){var e,r;return null==t&&(t=this.color),e=t.toHSV(),r={left:0,top:Math.round(this.height*(1-e.h/360))}},r.prototype.change=function(t){return this.color=t,this.position.move(this.getCoords()),r.__super__.change.apply(this,arguments)},r}(t)}.call(this),function(){var t,e,r,o,n,i,s={}.hasOwnProperty,a=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};i=ColorCanvas.Spine,e=ColorCanvas.Color,o=ColorCanvas.Gradient,n=ColorCanvas.Spectrum,t=ColorCanvas.Alpha,r=ColorCanvas.Display,ColorCanvas.Picker=function(i){function s(){s.__super__.constructor.apply(this,arguments),this.color||(this.color=new e({r:255,g:0,b:0})),this.color instanceof e||(this.color=new e(this.color)),this.original=this.color.clone(),this.render()}return a(s,i),s.prototype.className="colorCanvas",s.prototype.events={"click [data-type=cancel]":"cancel"},s.prototype.render=function(){var i=this;return this.el.empty(),this.gradient=new o({color:this.color}),this.spectrum=new n({color:this.color}),this.alpha=new t({color:this.color}),this.display=new r({color:this.color,original:this.original}),this.gradient.bind("change",function(t){return i.color.set(t.toRGB()),i.display.setColor(i.color),i.alpha.setColor(i.color),i.change()}),this.spectrum.bind("change",function(t){var r;return r=i.color.toHSV(),r.h=t.toHSV().h,t=new e(r),i.color.set(t.toRGB()),i.gradient.setColor(i.color),i.display.setColor(i.color),i.alpha.setColor(i.color),i.change()}),this.alpha.bind("change",function(t){return i.color.set({a:t.a}),i.display.setColor(i.color),i.change()}),this.display.bind("change",function(t){return i.color.set(t.toRGBA()),i.gradient.setColor(i.color),i.spectrum.setColor(i.color),i.alpha.setColor(i.color),i.change()}),this.append(this.gradient,this.spectrum,this.alpha,this.display)},s.prototype.cancel=function(t){return t.preventDefault(),this.change(this.original)},s.prototype.change=function(t){return null==t&&(t=this.color),this.trigger("change",t)},s.prototype.release=function(){return s.__super__.release.apply(this,arguments),this.gradient.release(),this.spectrum.release(),this.display.release()},s}(i.Controller)}.call(this);